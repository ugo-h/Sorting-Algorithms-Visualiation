(this["webpackJsonpmovie-picker"]=this["webpackJsonpmovie-picker"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),s=(n(16),n(8)),c=n(1),l=n.n(c),u=n(6),d=n(7),m=n(2),g=n(10),h=n(9),p=n(3),v=(n(18),n(19),function(e){return r.a.createElement("header",{className:"header"},r.a.createElement("h2",{onClick:e.resetMovieHandler,className:"logo"},"Movie Picker"))}),f=(n(20),function(e){var t=e.isLoading,n=e.searchMovieHandler,a=e.toggleModalHandler;return r.a.createElement("div",{className:"hero"},r.a.createElement("h1",{className:"hero__title"},"Never waste hours to find the perfect movie again!"),t?"LOADING....":r.a.createElement("button",{onClick:n,className:"btn--call-to-action"},"Pick a Movie"),r.a.createElement("button",{onClick:a,className:"btn--configuration btn-open-filters"},"Configure Filters"))}),M=(n(21),function(e){var t=e.movie;return console.log(t.genres),r.a.createElement("div",{className:"Movie"},r.a.createElement("img",{className:"Movie__poster",src:t.posterUrl?t.posterUrl:"https://vignette.wikia.nocookie.net/houseki-no-kuni/images/3/3b/Missingimage.png/revision/latest?cb=20190328111547&path-prefix=ru",alt:"Poster"}),r.a.createElement("div",{className:"Movie__content"},r.a.createElement("h2",{className:"Movie__content__title"},t.nameRu," (",t.year,")"),r.a.createElement("ul",{className:"Movie__content__header"},r.a.createElement("li",{className:"Movie__rating Movie__content__header__el"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",t.rating),r.a.createElement("li",{className:"Movie__content__header__el"},"\u0425\u0440\u043e\u043d\u043e\u043c\u0435\u0442\u0440\u0430\u0436: ",t.filmLength),r.a.createElement("li",{className:"Movie__content__header__el"},"\u0416\u0430\u043d\u0440\u044b: ",t.genres.map((function(e){return"".concat(e.genre,", ")})))),r.a.createElement("p",{className:"Movie__content__description"},t.description),r.a.createElement("a",{className:"Movie__btn btn--call-to-action",href:t.webUrl},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043d\u0430 \u041a\u0438\u043d\u043e\u043f\u043e\u0438\u0441\u043a\u0435")))}),_=(n(22),function(e){var t=e.show,n=e.children,a=e.toggleHandler,i=e.className;return o.a.createPortal(t?[r.a.createElement("div",{className:"Modal ".concat(i),key:"1"},n),r.a.createElement("div",{className:"backdrop",key:"2",onClick:a})]:"",document.getElementById("modal-root"))}),k=(n(23),function(e){var t=e.options,n=e.onChange,a=e.filter;return r.a.createElement("select",{onChange:n,className:"Genres-list"},r.a.createElement("option",{value:"0,20","data-set":!0},"\u041b\u044e\u0431\u043e\u0439"),t.map((function(e){return r.a.createElement("option",{value:"".concat(e.id,",").concat(e.pages||20),className:"Genres-list__item"},"".concat(e[a]," "))})))}),E=[{id:1750,genre:"\u0430\u043d\u0438\u043c\u0435"},{id:22,genre:"\u0431\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f"},{id:3,genre:"\u0431\u043e\u0435\u0432\u0438\u043a"},{id:13,genre:"\u0432\u0435\u0441\u0442\u0435\u0440\u043d"},{id:19,genre:"\u0432\u043e\u0435\u043d\u043d\u044b\u0439"},{id:17,genre:"\u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0432"},{id:456,genre:"\u0434\u0435\u0442\u0441\u043a\u0438\u0439",pages:2},{id:20,genre:"\u0434\u043b\u044f \u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445",pages:1},{id:12,genre:"\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439"},{id:8,genre:"\u0434\u0440\u0430\u043c\u0430"},{id:23,genre:"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"},{id:6,genre:"\u043a\u043e\u043c\u0435\u0434\u0438\u044f"},{id:15,genre:"\u043a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0430"},{id:16,genre:"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b"},{id:7,genre:"\u043c\u0435\u043b\u043e\u0434\u0440\u0430\u043c\u0430"},{id:21,genre:"\u043c\u0443\u0437\u044b\u043a\u0430"},{id:14,genre:"\u043c\u0443\u043b\u044c\u0442\u0444\u0438\u043b\u044c\u043c"},{id:9,genre:"\u043c\u044e\u0437\u0438\u043a\u043b"},{id:10,genre:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"},{id:11,genre:"\u0441\u0435\u043c\u0435\u0439\u043d\u044b\u0439"},{id:24,genre:"\u0441\u043f\u043e\u0440\u0442"},{id:4,genre:"\u0442\u0440\u0438\u043b\u043b\u0435\u0440"},{id:1,genre:"\u0443\u0436\u0430\u0441\u044b"},{id:2,genre:"\u0444\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430"},{id:18,genre:"\u0444\u0438\u043b\u044c\u043c-\u043d\u0443\u0430\u0440",pages:4},{id:5,genre:"\u0444\u044d\u043d\u0442\u0435\u0437\u0438"}];function b(){return(b=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://movie-proxy-api.glitch.me/getkey");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){return b.apply(this,arguments)}(),H=function(e){Object(g.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={movie:null,isLoading:!1,showModal:!1,options:{genre:0,pages:20}},a.searchMovieHandler=a.searchMovieHandler.bind(Object(m.a)(a)),a.resetMovieHandler=a.resetMovieHandler.bind(Object(m.a)(a)),a.toggleModalHandler=a.toggleModalHandler.bind(Object(m.a)(a)),a.selectGenreHandler=a.selectGenreHandler.bind(Object(m.a)(a)),a}return Object(d.a)(n,[{key:"toggleModalHandler",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w;case 2:console.log("API_KEY LOADED");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"resetMovieHandler",value:function(){this.setState({movie:null})}},{key:"searchMovieHandler",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.getDataFromKinopoisk();case 3:t=e.sent,this.setState({isLoading:!1,movie:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDataFromKinopoisk",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a,r,i,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.trunc(Math.random()*this.state.options.pages)+1,e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-filters?genre=".concat(this.state.options.genre,"&ratingFrom=7&type=FILM&page=").concat(t),{headers:{"X-API-KEY":w}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=Math.trunc(Math.random()*a.films.length),i=a.films[r],o=i.rating,s=i.filmId,e.next=11,this.getMovieDetailsFromKinopoisk(s);case 11:return(c=e.sent).rating=o,e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMovieDetailsFromKinopoisk",value:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t),{headers:{"X-API-KEY":w}});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectGenreHandler",value:function(e){var t=e.target.value.split(","),n=Object(s.a)(t,2),a=n[0],r=n[1];this.setState({options:{genre:a,pages:r}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v,{resetMovieHandler:this.resetMovieHandler}),this.state.movie?r.a.createElement(M,{movie:this.state.movie}):r.a.createElement(f,{searchMovieHandler:this.searchMovieHandler,toggleModalHandler:this.toggleModalHandler,isLoading:this.state.isLoading}),r.a.createElement(_,{className:"Preferences-modal",show:this.state.showModal,toggleHandler:this.toggleModalHandler},r.a.createElement("h3",null,"Preferences"),r.a.createElement("label",null,"\u0416\u0430\u043d\u0440:"),r.a.createElement(k,{onChange:this.selectGenreHandler,options:E,filter:"genre"}),r.a.createElement("button",{onClick:this.toggleModalHandler},"Apply")))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.cd83af9f.chunk.js.map