!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/assets/",s(s.s=0)}([function(e,t,s){"use strict";function n(e,t){e.forEach(e=>e.forEach(t))}function i(e){if("0"===e)return 48;const t={"[":219,"]":221,"-":189,"=":187,";":186,"'":222,",":188,".":190,"/":191,"`":192},s=function(e){if(!Number.isNaN(+e))return String(e);const t=e.toUpperCase(),s="йцукенгшщзхъ\\фывапролджэячсмитьбю.".indexOf(e.toLowerCase());return-1===s?t:"QWERTYUIOP[]\\ASDFGHJKL;'ZXCVBNM,./"[s]}(e);return t[s]?t[s]:s.charCodeAt(0)}s.r(t);class r{constructor(e,t){this.value=e,this.id=t||i(e),this.size=1}onPress(e){e.addChar(this.value)}onShift(){}onCaps(){}}class a extends r{constructor(e){super(e),this.size=4,this.id=8,this.icon="https://www.svgrepo.com/show/112572/backspace.svg"}onPress(e){e.deleteChar()}}class o extends r{constructor(e){super(e),this.size=8,this.id=13,this.icon="https://www.svgrepo.com/show/5370/next.svg"}onPress(e){e.addChar("\n")}}class c extends r{constructor(e){super(e),this.size=20,this.id=32}onPress(e){e.addChar(" ")}}class u extends r{constructor(e){super(e),this.size=4,this.id=7,this.icon="https://www.svgrepo.com/show/310884/globe.svg"}onPress(e){e.onLang()}}class d extends r{constructor(e){super(e),this.size=7,this.id=16}onPress(e){e.onShift()}}class l extends r{constructor(e){super(e),this.size=6,this.id=20}onPress(e){e.onCaps()}}function h(e,t,...s){const n=document.createElement(e);return Object.keys(t).forEach(e=>{n[e]=t[e]}),s.forEach(e=>{n.append(e)}),n}function p(e){return{start:e.selectionStart,end:e.selectionEnd}}function f(e,t){e.selectionStart=t,e.selectionEnd=t}function g(e){e.classList.add("highlighted"),setTimeout(()=>e.classList.remove("highlighted"),100)}const v=["en","ru"],m=[{main:"`!@#$%^&*()_+qwertyuiop[]asdfghjkl;'zxcvbnm,./",secondary:{"[":"{","]":"}",";":":","'":'"',",":"<",".":">","/":"?"}},{main:'ё!"№;%:?*()_+йцукенгшщзхъфывапролджэячсмитьбю.'}];function y(e,t){if("empty"===e.value)return function(){const e=h("td",{className:"keyboard__blanc"});return e.setAttribute("colspan",5),e}();let s=e.icon?function(e){return h("img",{className:"keyboard__icon",src:e.icon,alt:e.value})}(e):e.value;const n=h("td",{className:"keyboard__key",id:e.id},s);return n.setAttribute("colspan",e.size),e.size>2&&n.classList.add("special"),e.size>16&&n.classList.add("space"),"16"===e.id.toString()&&t.isShiftOn&&n.classList.add("active"),"20"===e.id.toString()&&t.isCapsOn&&n.classList.add("active"),"7"===e.id.toString()&&n.append(v[t.langIndex+1]||v[0]),n}class w{constructor(e){this.container=document.getElementById(e),this._preventFocus()}onKeyPress(e){this.container.addEventListener("click",t=>{if(t.target.classList.contains("keyboard__key")){const s=t.target.innerText,n=t.target.id;g(t.target),e({value:s,id:n})}})}render(e,t){const s=function(e,t){const s=h("table",{className:"keyboard"});for(let n=0;n<e.length;n++){const i=h("tr",{className:"keyboard__row"});e[n].forEach(e=>{const s=y(e,t);i.append(s)}),s.append(i)}return s}(e,t);this.container.innerHTML="",this.container.append(s)}_preventFocus(){this.container.addEventListener("mousedown",e=>e.preventDefault())}}class C{constructor(e){this.default=document.getElementById(e)}addChar(e){const t=this._getCurrentInput(),{start:s,end:n}=p(t),i=t.value.split("");i.splice(s,n-s,e),t.value=i.join(""),f(t,s+1)}deleteChar(){const e=this._getCurrentInput(),{start:t,end:s}=p(e);if(0===t&&t===s)return;const n=e.value.split("");s===t?n.splice(s-1,1):n.splice(t,s-t),e.value=n.join(""),f(e,t-1),t!==s&&f(e,t)}_getCurrentInput(){let e;var t;return void 0!==document.activeElement.value?e=document.activeElement:(e=this.default,e.focus()),t=e,setTimeout(()=>{t.focus(),setTimeout(()=>{t.setAttribute("style","display:none;")},50)},50),e}}class b extends r{constructor(e,t){super(e),this.altValue=t}onShift(){this._swapValues()}onPress(e){e.addChar(this.value)}_swapValues(){[this.value,this.altValue]=[this.altValue,this.value]}}class S extends r{constructor(e){super(e)}onCaps(e){this.value=e?this.value.toUpperCase():this.value.toLowerCase()}}function k(e,t,s){const n=function(e,t){return e.secondary?e.secondary[t]:null}(t,t.main[s]);n?e.push(new b(t.main[s],n)):e.push(new S(t.main[s]))}function _(e){const t=[["`",1,2,3,4,5,6,7,8,9,0,"-","=",new a("backspace",8)],[new r("empty")],[new l("caps",20)],[new d("shift",16)],[new u("lang"),new c(" "),new o("enter")]];for(let s=0;s<13;s+=1)t[0][s]=new b(t[0][s],e.main[s]);for(let s=13;s<25;s+=1)k(t[1],e,s);for(let s=25;s<36;s+=1)k(t[2],e,s);for(let s=36;s<46;s+=1)k(t[3],e,s);return t}class x{constructor(e){this.state={isCapsOn:!1,isShiftOn:!1,langIndex:0},this.languages=e,this.keys=_(this.languages[this.state.langIndex]),this.needsRerendering=!1}hasChanges(){return this.needsRerendering}changesAppliedToUI(){this.needsRerendering=!1}changeLang(){this.state.langIndex+=1,this.state.isCapsOn=!1,this.state.isShiftOn=!1,this.state.langIndex>=this.languages.length&&(this.state.langIndex=0),this.keys=_(this.languages[this.state.langIndex]),this.needsRerendering=!0}changeRegister(){this.state.isCapsOn=!this.state.isCapsOn;const{isCapsOn:e}=this.state;n(this.keys,t=>t.onCaps(e)),this.needsRerendering=!0}changeSpecialCharactersAndNums(){this.state.isShiftOn=!this.state.isShiftOn,n(this.keys,e=>e.onShift()),this.needsRerendering=!0}}class O{constructor(e,t,s){const n=new C(s);this.ui=new w(t),this.state=new x(e),this.keyPressHandlerAPI=function(e,t){return{onLang:t.changeLang.bind(t),onShift:t.changeSpecialCharactersAndNums.bind(t),onCaps:t.changeRegister.bind(t),addChar:e.addChar.bind(e),deleteChar:e.deleteChar.bind(e)}}(n,this.state),this.ui.onKeyPress(this.pressHandler.bind(this)),function(e){const t=new Set;document.addEventListener("keydown",s=>{let n=s.keyCode.toString(),i=s.key;t.add(n),t.has("16")&&t.has("18")?e({id:"7",value:"lang"}):"20"!==n&&"16"!==n||e({id:n,value:i});const r=document.getElementById(n);null!==r&&g(r)}),document.addEventListener("keyup",e=>{let s=e.keyCode.toString();t.delete(s)})}(this.pressHandler.bind(this))}renderCurrentState(){const{keys:e,state:t}=this.state;this.ui.render(e,t),this.state.changesAppliedToUI()}pressHandler({id:e,value:t}){(function(e,t){switch(e){case"16":return new d(t,e);case"20":return new l(t,e);case"7":return new u(t,e);case"13":return new o(t,e);case"32":return new c(t,e);case"8":return new a(t,e);default:return new r(t,e)}})(e,t).onPress(this.keyPressHandlerAPI),this.state.hasChanges()&&this.renderCurrentState()}}(class{static Init(){new O(m,"container","input").renderCurrentState()}}).Init()}]);