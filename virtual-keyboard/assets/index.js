!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/",n(n.s=0)}([function(e,t,n){"use strict";function s(e,t){e.forEach(e=>e.forEach(t))}function r(e){if("0"===e)return 48;const t={"[":219,"]":221,"-":189,"=":187,";":186,"'":222,",":188,".":190,"/":191,"`":192},n=function(e){if(!Number.isNaN(+e))return String(e);const t=e.toUpperCase(),n="йцукенгшщзхъ\\фывапролджэячсмитьбю.".indexOf(e.toLowerCase());return-1===n?t:"QWERTYUIOP[]\\ASDFGHJKL;'ZXCVBNM,./"[n]}(e);return t[n]?t[n]:n.charCodeAt(0)}n.r(t);class i{constructor(e,t){this.value=e,this.id=t||r(e),this.size=1}onPress(e){e.addChar(this.value)}onShift(){}onCaps(){}}class a extends i{constructor(e){super(e),this.size=4,this.id=8,this.icon="https://www.svgrepo.com/show/112572/backspace.svg"}onPress(e){e.deleteChar()}}class o extends i{constructor(e){super(e),this.size=8,this.id=13,this.icon="https://www.svgrepo.com/show/5370/next.svg"}onPress(e){e.addChar("\n")}}class c extends i{constructor(e){super(e),this.size=20,this.id=32}onPress(e){e.addChar(" ")}}class u extends i{constructor(e){super(e),this.size=4,this.id=7,this.icon="https://www.svgrepo.com/show/310884/globe.svg"}onPress(e){e.onLang()}}class d extends i{constructor(e){super(e),this.size=7,this.id=16}onPress(e){e.onShift()}}class l extends i{constructor(e){super(e),this.size=6,this.id=20}onPress(e){e.onCaps()}}function h(e,t,...n){const s=document.createElement(e);return Object.keys(t).forEach(e=>{s[e]=t[e]}),n.forEach(e=>{s.append(e)}),s}function p(e){return{start:e.selectionStart,end:e.selectionEnd}}function g(e,t){e.selectionStart=t,e.selectionEnd=t}function f(e){e.classList.add("highlighted"),setTimeout(()=>e.classList.remove("highlighted"),100)}const v=["en","ru"],w=[{main:"`!@#$%^&*()_+qwertyuiop[]asdfghjkl;'zxcvbnm,./",secondary:{"[":"{","]":"}",";":":","'":'"',",":"<",".":">","/":"?"}},{main:'ё!"№;%:?*()_+йцукенгшщзхъфывапролджэячсмитьбю.'}];function m(e,t){if("empty"===e.value)return function(){const e=h("td",{className:"keyboard__blanc"});return e.setAttribute("colspan",5),e}();let n=e.icon?function(e){return h("img",{className:"keyboard__icon",src:e.icon,alt:e.value})}(e):e.value;const s=h("td",{className:"keyboard__key",id:e.id},n);return s.setAttribute("colspan",e.size),e.size>2&&s.classList.add("special"),e.size>16&&s.classList.add("space"),"16"===e.id.toString()&&t.isShiftOn&&s.classList.add("active"),"20"===e.id.toString()&&t.isCapsOn&&s.classList.add("active"),"7"===e.id.toString()&&s.append(v[t.langIndex+1]||v[0]),s}class y{constructor(e){this.container=document.getElementById(e),this._preventFocus()}onKeyPress(e){this.container.addEventListener("click",t=>{if(t.target.classList.contains("keyboard__key")){const n=t.target.innerText,s=t.target.id;f(t.target),e({value:n,id:s})}})}render(e,t){const n=function(e,t){const n=h("table",{className:"keyboard"});for(let s=0;s<e.length;s++){const r=h("tr",{className:"keyboard__row"});e[s].forEach(e=>{const n=m(e,t);r.append(n)}),n.append(r)}return n}(e,t);this.container.innerHTML="",this.container.append(n)}_preventFocus(){this.container.addEventListener("mousedown",e=>e.preventDefault())}}class C{constructor(e){this.default=document.getElementById(e)}addChar(e){const t=this._getCurrentInput(),{start:n,end:s}=p(t),r=t.value.split("");r.splice(n,s-n,e),t.value=r.join(""),g(t,n+1)}deleteChar(){const e=this._getCurrentInput(),{start:t,end:n}=p(e);if(0===t&&t===n)return;const s=e.value.split("");n===t?s.splice(n-1,1):s.splice(t,n-t),e.value=s.join(""),g(e,t-1),t!==n&&g(e,t)}_getCurrentInput(){let e;return void 0!==document.activeElement.value?e=document.activeElement:(e=this.default,e.focus()),e}_triggerInputEvent(){const e=this._getCurrentInput(),t=new InputEvent("input");e.dispatchEvent(t)}}class b extends i{constructor(e,t){super(e),this.altValue=t}onShift(){this._swapValues()}onPress(e){e.addChar(this.value)}_swapValues(){[this.value,this.altValue]=[this.altValue,this.value]}}class S extends i{constructor(e){super(e)}onCaps(e){this.value=e?this.value.toUpperCase():this.value.toLowerCase()}}function _(e,t,n){const s=function(e,t){return e.secondary?e.secondary[t]:null}(t,t.main[n]);s?e.push(new b(t.main[n],s)):e.push(new S(t.main[n]))}function k(e){const t=[["`",1,2,3,4,5,6,7,8,9,0,"-","=",new a("backspace",8)],[new i("empty")],[new l("caps",20)],[new d("shift",16)],[new u("lang"),new c(" "),new o("enter")]];for(let n=0;n<13;n+=1)t[0][n]=new b(t[0][n],e.main[n]);for(let n=13;n<25;n+=1)_(t[1],e,n);for(let n=25;n<36;n+=1)_(t[2],e,n);for(let n=36;n<46;n+=1)_(t[3],e,n);return t}class x{constructor(e){this.state={isCapsOn:!1,isShiftOn:!1,langIndex:0},this.languages=e,this.keys=k(this.languages[this.state.langIndex]),this.needsRerendering=!1}hasChanges(){return this.needsRerendering}changesAppliedToUI(){this.needsRerendering=!1}changeLang(){this.state.langIndex+=1,this.state.isCapsOn=!1,this.state.isShiftOn=!1,this.state.langIndex>=this.languages.length&&(this.state.langIndex=0),this.keys=k(this.languages[this.state.langIndex]),this.needsRerendering=!0}changeRegister(){this.state.isCapsOn=!this.state.isCapsOn;const{isCapsOn:e}=this.state;s(this.keys,t=>t.onCaps(e)),this.needsRerendering=!0}changeSpecialCharactersAndNums(){this.state.isShiftOn=!this.state.isShiftOn,s(this.keys,e=>e.onShift()),this.needsRerendering=!0}}class I{constructor(e,t,n){const s=new C(n);this.ui=new y(t),this.state=new x(e),this.keyPressHandlerAPI=function(e,t){return{onLang:t.changeLang.bind(t),onShift:t.changeSpecialCharactersAndNums.bind(t),onCaps:t.changeRegister.bind(t),addChar:e.addChar.bind(e),deleteChar:e.deleteChar.bind(e)}}(s,this.state),this.ui.onKeyPress(this.pressHandler.bind(this)),function(e){const t=new Set;document.addEventListener("keydown",n=>{let s=n.keyCode.toString(),r=n.key;t.add(s),t.has("16")&&t.has("18")?e({id:"7",value:"lang"}):"20"!==s&&"16"!==s||e({id:s,value:r});const i=document.getElementById(s);null!==i&&f(i)}),document.addEventListener("keyup",e=>{let n=e.keyCode.toString();t.delete(n)})}(this.pressHandler.bind(this))}renderCurrentState(){const{keys:e,state:t}=this.state;this.ui.render(e,t),this.state.changesAppliedToUI()}pressHandler({id:e,value:t}){(function(e,t){switch(e){case"16":return new d(t,e);case"20":return new l(t,e);case"7":return new u(t,e);case"13":return new o(t,e);case"32":return new c(t,e);case"8":return new a(t,e);default:return new i(t,e)}})(e,t).onPress(this.keyPressHandlerAPI),this.state.hasChanges()&&this.renderCurrentState()}}(class{static Init(){new I(w,"container","input").renderCurrentState()}}).Init()}]);